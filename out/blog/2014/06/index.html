<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'>
  <head>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8' />
    <title>Home of Tycho Andersen on the Internets</title>
    <link rel='stylesheet' type='text/css' href='/bootstrap.css' />
    <link rel='stylesheet' type='text/css' href='/custom.css' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
    <script src='/post.js'></script>
  </head>
<body>

  <div class='navbar navbar-inverse navbar-fixed-top'>
    <div class='navbar-inner'>
      <div class='container'>
        <ul class='nav'>
          <li><a href='/'>Blog</a></li>
          <li><a href='/misc.html'>Miscellany</a></li>
          <li><a href='/music.html'>Music</a></li>
        </ul>
        <ul class='nav' style='float: right;'>
          <li><a href='/archives'>Archives</a></li>
          <li><a href='/tags'>Tags</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div id='content' class='container' style='padding-top: 50px;'><div class='page well'>
  <h2 class='title'>xcffib 0.1.0 released!</h2>
  <p class='byline'>
    <small>Posted by <span class='author'>tycho</span> on <span class='date'>2014-07-12</span></small>
  </p>
  <div class='content'><p>I'm excited to announce today that I've tagged the first release of <a href='https://github.com/tych0/xcffib'>xcffib</a>, v0.1.0. The testing of xcffib with qtile has been mostly successful, and I'm comfortable now tagging a release. Special thanks to <a href='https://github.com/flacjacket'>Sean Vig</a> who has done a lot of work on the python3 side of xcffib. Happy hacking!</p></div>
  <div class='meta'>
    <p class='links'>
      <span class='tags'>Tags: <a href='/tags/xcb.html' class='tag'>xcb, </a><a href='/tags/xcffib.html' class='tag'>xcffib, </a><a href='/tags/python.html' class='tag'>python</a></span>
       •   <a href='/blog/2014/06/xcffib.html' class='more'>Read full post »</a>
    </p>
  </div>
</div><div class='page well'>
  <h2 class='title'>CFFI-based Qtile!</h2>
  <p class='byline'>
    <small>Posted by <span class='author'>tycho</span> on <span class='date'>2014-06-21</span></small>
  </p>
  <div class='content'><p>For the past while I've been working on a reimplementation of <a href='https://pypi.python.org/pypi/xpyb/1.3.1'>xpyb</a> in <a href='https://cffi.readthedocs.org/en/release-0.8/'>cffi</a>. There are several reasons to want to do this:</p>
<h1>. xpyb has at least <a href='https://github.com/qtile/qtile/issues/395'>one more</a> memory leak (but probably others)</h1>
<h1>. The xpyb upstream is inactive, and there is no sign of a python 3 port</h1>
<h1>. It would be uber cool to be able to run qtile in pypy.</h1>
<p>Using cffi soves 2 and 3 pretty easily, and I've made sure that xcffib's test suite runs through valgrind with no definite leaks, hopefully mitigating 1. However, even if we have xcffib, there is still a lot of work that needed to happen to make qtile run on top of it. I'm writing this post to announce that some of that work is done, and late last night I was able to boot qtile running on top of xffib! There are still lots of bugs, and lots of testing needs to be done, but we're most of the way there I think, and running qtile on python3 and pypy without memory leaks is no longer a pipe dream :-).</p>
<p>To install, you'll need:</p>
<h1>. <code>sudo apt-get install xcb-proto libpango1.0-dev libcairo2-dev</code> (or whatever</h1>
<p>the equivalent packages are on your distro)</p>
<h1>. Follow the <a href='https://github.com/tych0/xcffib/blob/master/.travis.yml#L17'>installation instructions</a> for xcffib.</h1>
<h1>. Install the <code>xcffib</code> branch of <a href='https://github.com/tych0/cairocffi/tree/xcffib'>tych0/cairocffi</a></h1>
<h1>. Install the <code>cffi</code> branch of <a href='https://github.com/tych0/qtile/tree/cffi'>tych0/qtile</a></h1>
<p>I have not tried to test qtile on python 3 yet, so there may be some work that needs to be done to successfully run things on python 3. However, both xcffib and cairocffi run their test suites on python 3, and so the only work that needs to be done is probably in qtile, if any. pypy is another story however, as xcffib does not currently pass its test suite on pypy. I plan to fix that at some point, but I'd like to get qtile running completely before that happens.</p>
<p>Finally, there are some bugs that manifest with qtile right now:</p>
<h1>. The systray doesn't work. This is probably due to a bug in the way xcffib</h1>
<p>unpacks ClientMessage events.</p>
<h1>. Most of the text-based widgets don't work. This is probably due to a bug in</h1>
<p>the pangocffi binding I wrote for qtile. I thing it is just an incompleteness, and I will try and fix it either today or tomorrow. Basic text widgets like the clock or the volume widget work just fine.</p>
<h1>. Lots of other things are probably broken :-). Bug reports welcome.</h1>
<p>Happy hacking!</p></div>
  <div class='meta'>
    <p class='links'>
      <span class='tags'>Tags: <a href='/tags/qtile.html' class='tag'>qtile, </a><a href='/tags/python.html' class='tag'>python</a></span>
       •   <a href='/blog/2014/06/qtile-cffi.html' class='more'>Read full post »</a>
    </p>
  </div>
</div></div>
</body>
</html>
